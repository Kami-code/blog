<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>mmdection_hammer_segmentation - Ryan &#039;s website</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Ryan&#039;s blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Ryan&#039;s blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="The first time for me to construct a custom dataset and apply it in the mmdection. The whole pipeline is as follows: I. Collect and prepare the raw dataset. II. Convert the raw dataset into COCO style"><meta property="og:type" content="blog"><meta property="og:title" content="mmdection_hammer_segmentation"><meta property="og:url" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/"><meta property="og:site_name" content="Ryan &#039;s website"><meta property="og:description" content="The first time for me to construct a custom dataset and apply it in the mmdection. The whole pipeline is as follows: I. Collect and prepare the raw dataset. II. Convert the raw dataset into COCO style"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps6.jpg"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps7.jpg"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/image-20211029175539492.png"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps10.jpg"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/image-20211029175614140.png"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps11.jpg"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps12.jpg"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps13.jpg"><meta property="og:image" content="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps14.jpg"><meta property="article:published_time" content="2021-10-29T09:53:31.000Z"><meta property="article:modified_time" content="2021-10-29T10:37:42.737Z"><meta property="article:author" content="Kami-code"><meta property="article:tag" content="mmdection"><meta property="article:tag" content="segmentation"><meta property="article:tag" content="deeplearning"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2021/10/29/mmdection-hammer-segmentation/wps6.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/"},"headline":"mmdection_hammer_segmentation","image":["https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps6.jpg","https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps7.jpg","https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/image-20211029175539492.png","https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps10.jpg","https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/image-20211029175614140.png","https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps11.jpg","https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps12.jpg","https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps13.jpg","https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/wps14.jpg"],"datePublished":"2021-10-29T09:53:31.000Z","dateModified":"2021-10-29T10:37:42.737Z","author":{"@type":"Person","name":"Kami-code"},"publisher":{"@type":"Organization","name":"Ryan 's website","logo":{"@type":"ImageObject","url":"https://kami-code.com/img/logo.svg"}},"description":"The first time for me to construct a custom dataset and apply it in the mmdection. The whole pipeline is as follows: I. Collect and prepare the raw dataset. II. Convert the raw dataset into COCO style"}</script><link rel="canonical" href="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Ryan &#039;s website" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-29T09:53:31.000Z" title="2021/10/29 下午5:53:31">2021-10-29</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-10-29T10:37:42.737Z" title="2021/10/29 下午6:37:42">2021-10-29</time></span><span class="level-item">12 minutes read (About 1730 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">mmdection_hammer_segmentation</h1><div class="content"><p>The first time for me to construct a custom dataset and apply it in the mmdection.</p>
<p>The whole pipeline is as follows:</p>
<p><strong>I. Collect and prepare the raw dataset.</strong></p>
<p><strong>II. Convert the raw dataset into COCO style.</strong></p>
<p><strong>III. Add and movify the mask-rcnn configuration in mmdection API to fit our requirement.</strong></p>
<p><strong>IV. Train the model by mmdection.</strong></p>
<p><strong>V. Evaluate and visualize the test dataset.</strong></p>
<p><strong>VI. Modify the result into mask image so that we can insert it smoothly in our pipeline.</strong></p>
 <span id="more"></span>

<p>Because of the fact that the project is still ongoing, the part I and part VI will NOT be described detailedly.</p>
<h2 id="1-The-dataset"><a href="#1-The-dataset" class="headerlink" title="1.The dataset"></a><strong>1.The dataset</strong></h2><p><img src="/2021/10/29/mmdection-hammer-segmentation/wps6.jpg"><img src="/2021/10/29/mmdection-hammer-segmentation/wps7.jpg"> </p>
<p>As shown above, it’s a sample from my created dataset which contains a rgb image and corresponding mask. The foreground is a tool(the hammer), and the background contains other unrelated things. At the very beginning when there was no relationship to how to training, it is of top priority to create enough data and split them into train, validate and test dataset. We collected 4535 imgs, 464 imgs and 454 imgs for training, validating and evaluating.</p>
<h2 id="2-The-format-of-COCO"><a href="#2-The-format-of-COCO" class="headerlink" title="2. The format of COCO"></a>2. <strong>The format of COCO</strong></h2><p>As said by a famous blog, we use COCO to reconstruct our data is not because it is the best format, but it is the most widely used and accepted format. So we need to arrange our dataset in that format. To our relief, there are a lot of tools to help us automatically conduct such procedure, for example, <a target="_blank" rel="noopener" href="https://github.com/waspinator/pycococreator">pycococreator</a>.</p>
<p>What we need to do is only to set the related INFO, LICENSES, CATEGORIES and corresponding directory.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">INFO = &#123;</span><br><span class="line">    <span class="string">&quot;description&quot;</span>: <span class="string">&quot;Hammer Segmentation Dataset&quot;</span>,</span><br><span class="line">    <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://github.com/Kami-code&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.1.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;year&quot;</span>: <span class="number">2022</span>,</span><br><span class="line">    <span class="string">&quot;contributor&quot;</span>: <span class="string">&quot;Kami-code&quot;</span>,</span><br><span class="line">    <span class="string">&quot;date_created&quot;</span>: datetime.datetime.utcnow().isoformat(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LICENSES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Attribution-NonCommercial-ShareAlike License&quot;</span>,</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;http://creativecommons.org/licenses/by-nc-sa/2.0/&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">CATEGORIES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;hammer&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;supercategory&#x27;</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    ROOT_DIR = <span class="string">&#x27;hammer_&#x27;</span> + MODE</span><br><span class="line">    IMAGE_DIR = os.path.join(ROOT_DIR, <span class="string">&quot;rgb&quot;</span>)</span><br><span class="line">    ANNOTATION_DIR = os.path.join(ROOT_DIR, <span class="string">&quot;mask&quot;</span>)</span><br><span class="line">    coco_output = &#123;</span><br><span class="line">        <span class="string">&quot;info&quot;</span>: INFO,</span><br><span class="line">        <span class="string">&quot;licenses&quot;</span>: LICENSES,</span><br><span class="line">        <span class="string">&quot;categories&quot;</span>: CATEGORIES,</span><br><span class="line">        <span class="string">&quot;images&quot;</span>: [],</span><br><span class="line">        <span class="string">&quot;annotations&quot;</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><img src="/2021/10/29/mmdection-hammer-segmentation/image-20211029175539492.png"></p>
<p>The structure is from the <a target="_blank" rel="noopener" href="https://patrickwasp.com/create-your-own-coco-style-dataset/">blog</a>. You can refer to it to create your custom dataset. What I want to mention is if we have a lot of mask of different objects on a single image(though not in our current settings), the annotation_id should start from 0 and increase for each mask, while the meaning of image_id is easily understood. By the way, it seems no need to make annotation_id the same as “id” in CATEGORIES, so making it start from zero is necessary.</p>
<p>After running the script of <a target="_blank" rel="noopener" href="https://github.com/waspinator/pycococreator/blob/master/examples/shapes/shapes_to_coco.py">pycococreator</a>, we get a single json file named “instance_train2022.json”. We can use the visualizer script provided in that repo to visualize to check whether we successfully get a COCO json file. COCO will contain the information which provided in the mask.png file using contour algorithm.(Finally, they will be stored in polygons format.) </p>
<p><img src="/2021/10/29/mmdection-hammer-segmentation/wps10.jpg"> </p>
<p>Since now, we have successfully got our first COCO dataset!</p>
<h2 id="3-MMDection"><a href="#3-MMDection" class="headerlink" title="3. MMDection"></a>3. <strong>MMDection</strong></h2><p><a target="_blank" rel="noopener" href="https://github.com/open-mmlab/mmdetection">MMDetection</a> is an open source object detection toolbox based on PyTorch. It is a part of the OpenMMLab project. It provides a abstraction on the PyTorch which enables me train my network without writing any code. Frankly speaking, I will not use it if I have enough time to dig deep in mask-rcnn, cause it makes me tightly rely on the API, which do no good for my career. For now, given limited time, I have to use it. </p>
<p>To use it, I mainly refer to the proceduce in <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/344841580">this zhihu blog</a>. But it also contains some frustrating bug, which I will explain below.</p>
<p><img src="/2021/10/29/mmdection-hammer-segmentation/image-20211029175614140.png"></p>
<p>This is the files need to add and modify if we want to add a new dataset to train by mask_rcnn. (marked in green means the newly-added file and marked in brown means the file needed to be modified)</p>
<p>Let’s find how exactly these files works.</p>
<p>mmdection/configs/mask_rcnn/my_mask_rcnn.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_base_ = [</span><br><span class="line">    <span class="string">&#x27;../_base_/models/my_mask_rcnn_r50_fpn.py&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;../common/my_coco_instance.py&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;../_base_/schedules/schedule_2x.py&#x27;</span> ,</span><br><span class="line"><span class="string">&#x27;../_base_/default_runtime.py&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>The file just links all the files we added.</p>
<p>Next, we should define our own dataset structure, since we’ve got the dataset in COCO format. We can replicate the coco.py and change a little to get our “keto_coco.py”.</p>
<p> mmdection/mmdet/datasets/coco.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DATASETS.register_module()</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CocoDataset</span>(<span class="params">CustomDataset</span>):</span></span><br><span class="line"></span><br><span class="line">    CLASSES = (<span class="string">&#x27;person&#x27;</span>, <span class="string">&#x27;bicycle&#x27;</span>, <span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;motorcycle&#x27;</span>, <span class="string">&#x27;airplane&#x27;</span>, <span class="string">&#x27;bus&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;truck&#x27;</span>, <span class="string">&#x27;boat&#x27;</span>, <span class="string">&#x27;traffic light&#x27;</span>, <span class="string">&#x27;fire hydrant&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;stop sign&#x27;</span>, <span class="string">&#x27;parking meter&#x27;</span>, <span class="string">&#x27;bench&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;horse&#x27;</span>, <span class="string">&#x27;sheep&#x27;</span>, <span class="string">&#x27;cow&#x27;</span>, <span class="string">&#x27;elephant&#x27;</span>, <span class="string">&#x27;bear&#x27;</span>, <span class="string">&#x27;zebra&#x27;</span>, <span class="string">&#x27;giraffe&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;backpack&#x27;</span>, <span class="string">&#x27;umbrella&#x27;</span>, <span class="string">&#x27;handbag&#x27;</span>, <span class="string">&#x27;tie&#x27;</span>, <span class="string">&#x27;suitcase&#x27;</span>, <span class="string">&#x27;frisbee&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;skis&#x27;</span>, <span class="string">&#x27;snowboard&#x27;</span>, <span class="string">&#x27;sports ball&#x27;</span>, <span class="string">&#x27;kite&#x27;</span>, <span class="string">&#x27;baseball bat&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;baseball glove&#x27;</span>, <span class="string">&#x27;skateboard&#x27;</span>, <span class="string">&#x27;surfboard&#x27;</span>, <span class="string">&#x27;tennis racket&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;bottle&#x27;</span>, <span class="string">&#x27;wine glass&#x27;</span>, <span class="string">&#x27;cup&#x27;</span>, <span class="string">&#x27;fork&#x27;</span>, <span class="string">&#x27;knife&#x27;</span>, <span class="string">&#x27;spoon&#x27;</span>, <span class="string">&#x27;bowl&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;sandwich&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;broccoli&#x27;</span>, <span class="string">&#x27;carrot&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;hot dog&#x27;</span>, <span class="string">&#x27;pizza&#x27;</span>, <span class="string">&#x27;donut&#x27;</span>, <span class="string">&#x27;cake&#x27;</span>, <span class="string">&#x27;chair&#x27;</span>, <span class="string">&#x27;couch&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;potted plant&#x27;</span>, <span class="string">&#x27;bed&#x27;</span>, <span class="string">&#x27;dining table&#x27;</span>, <span class="string">&#x27;toilet&#x27;</span>, <span class="string">&#x27;tv&#x27;</span>, <span class="string">&#x27;laptop&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;mouse&#x27;</span>, <span class="string">&#x27;remote&#x27;</span>, <span class="string">&#x27;keyboard&#x27;</span>, <span class="string">&#x27;cell phone&#x27;</span>, <span class="string">&#x27;microwave&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;oven&#x27;</span>, <span class="string">&#x27;toaster&#x27;</span>, <span class="string">&#x27;sink&#x27;</span>, <span class="string">&#x27;refrigerator&#x27;</span>, <span class="string">&#x27;book&#x27;</span>, <span class="string">&#x27;clock&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;vase&#x27;</span>, <span class="string">&#x27;scissors&#x27;</span>, <span class="string">&#x27;teddy bear&#x27;</span>, <span class="string">&#x27;hair drier&#x27;</span>, <span class="string">&#x27;toothbrush&#x27;</span>)</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>mmdection/mmdet/datasets/keto_coco.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DATASETS.register_module()</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KpCocoDataset</span>(<span class="params">CustomDataset</span>):</span></span><br><span class="line"></span><br><span class="line">    CLASSES = [<span class="string">&#x27;hammer&#x27;</span>,]</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>As we can see, what we do is just set the CLASSES variable into a list only containing one class hammer. The reason that we change the tuple to list seems to be a version-related problem that the low-level function will misleadingly parse the wrong type.</p>
<p>mmdection/mmdet/datasets/<strong>init</strong>.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">__all__ = [</span><br><span class="line">    <span class="string">&#x27;CustomDataset&#x27;</span>, <span class="string">&#x27;XMLDataset&#x27;</span>, <span class="string">&#x27;CocoDataset&#x27;</span>, <span class="string">&#x27;DeepFashionDataset&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;VOCDataset&#x27;</span>, <span class="string">&#x27;CityscapesDataset&#x27;</span>, <span class="string">&#x27;LVISDataset&#x27;</span>, <span class="string">&#x27;LVISV05Dataset&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;LVISV1Dataset&#x27;</span>, <span class="string">&#x27;GroupSampler&#x27;</span>, <span class="string">&#x27;DistributedGroupSampler&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;DistributedSampler&#x27;</span>, <span class="string">&#x27;build_dataloader&#x27;</span>, <span class="string">&#x27;ConcatDataset&#x27;</span>, <span class="string">&#x27;RepeatDataset&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;ClassBalancedDataset&#x27;</span>, <span class="string">&#x27;WIDERFaceDataset&#x27;</span>, <span class="string">&#x27;DATASETS&#x27;</span>, <span class="string">&#x27;PIPELINES&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;build_dataset&#x27;</span>, <span class="string">&#x27;replace_ImageToTensor&#x27;</span>, <span class="string">&#x27;get_loading_pipeline&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;NumClassCheckHook&#x27;</span>, <span class="string">&#x27;CocoPanopticDataset&#x27;</span>, <span class="string">&#x27;MultiImageMixDataset&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;KpCocoDataset&#x27;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>Since we defined our KpCocoDataset, to make it register into the dataset collection, we need to add the structure name into its <strong>init</strong>.py and recomplie the module.</p>
<p>In class_names.py, we should also add a simple function to get the classes of our defined dataset.</p>
<p>mmdection/mmdet/core/evaluation/class_name.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kp_coco_classes</span>():</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="string">&#x27;hammer&#x27;</span>]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>



<p>Also, a change in <strong>init</strong>.py is necessary. But there is no explicit call of this function, I GUESS the function may not be called or is called by its name in some format.</p>
<p>The my_mask_rcnn_r50_fpn.py is replicated from the mask_rcnn_r50_fpn.py. We just change the class_num parameter 80 to 1.</p>
<p>In my_coco_instance.py, we defined the path of the three COCO json files, and train and test pipeline.</p>
<p>mmdection/configs/common/my_coco_instance.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">data = <span class="built_in">dict</span>(</span><br><span class="line">    samples_per_gpu=<span class="number">2</span>,</span><br><span class="line">    workers_per_gpu=<span class="number">2</span>,</span><br><span class="line">    train=<span class="built_in">dict</span>(</span><br><span class="line">        <span class="built_in">type</span>=<span class="string">&#x27;RepeatDataset&#x27;</span>,</span><br><span class="line">        times=<span class="number">4</span>,</span><br><span class="line">        dataset=<span class="built_in">dict</span>(</span><br><span class="line">            <span class="built_in">type</span>=dataset_type,</span><br><span class="line">            ann_file=data_root + <span class="string">&#x27;annotations/instances_train2022.json&#x27;</span>,</span><br><span class="line">            img_prefix=data_root + <span class="string">&#x27;train2022/&#x27;</span>,</span><br><span class="line">            pipeline=train_pipeline)),</span><br><span class="line">    val=<span class="built_in">dict</span>(</span><br><span class="line">        <span class="built_in">type</span>=dataset_type,</span><br><span class="line">        ann_file=data_root + <span class="string">&#x27;annotations/instances_validate2022.json&#x27;</span>,</span><br><span class="line">        img_prefix=data_root + <span class="string">&#x27;validate2022/&#x27;</span>,</span><br><span class="line">        pipeline=test_pipeline),</span><br><span class="line">    test=<span class="built_in">dict</span>(</span><br><span class="line">        <span class="built_in">type</span>=dataset_type,</span><br><span class="line">        ann_file=data_root + <span class="string">&#x27;annotations/instances_test2022.json&#x27;</span>,</span><br><span class="line">        img_prefix=data_root + <span class="string">&#x27;test2022/&#x27;</span>,</span><br><span class="line">        pipeline=test_pipeline),</span><br><span class="line">)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>And we will train the data on a single GPU with 2 samples_per_gpu, so we should downsize the learning rate defined in schedule_2x.py 8 times, because it’s default value is assuming the training is on 8 GPUs with 2 samples_per_gpu.</p>
<h2 id="4-Train-our-model"><a href="#4-Train-our-model" class="headerlink" title="4. Train our model"></a>4. <strong>Train our model</strong></h2><p>We can use the following command line to start training process. Though I have spent much time in debugging in the process. If we correctly config the mentioned files, it will finally works.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python tools/train.py configs/mask_rcnn/my_mask_rcnn.py</span><br></pre></td></tr></table></figure>

<p>When training, we can read the logs to make sure we are on the right track.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2021-10-27 15:16:22,077 - mmdet - INFO - Epoch [1][2400/9070]  lr: 2.500e-03, eta: 17:30:32, time: 0.288, data_time: 0.010, memory: 7875, loss_rpn_cls: 0.0216, loss_rpn_bbox: 0.0081, loss_cls: 0.0925, acc: 97.2070, loss_bbox: 0.1120, loss_mask: 0.1732, loss: 0.4074</span><br></pre></td></tr></table></figure>

<p>How are the batches each epoch 9070 calculated? Recall that we set the training set to be repeat dataset 4, which means the total training dataset is 4535 * 4 = 18140. And we configure the training process on a single with samples_per_gpu = 2. So we get batch_size = 18140 / 2 = 9070. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">2021-10-27 22:03:28,363 - mmdet - INFO - Evaluating segm...</span><br><span class="line">Loading and preparing results...</span><br><span class="line">DONE (t=0.04s)</span><br><span class="line">creating index...</span><br><span class="line">index created!</span><br><span class="line">Running per image evaluation...</span><br><span class="line">Evaluate annotation type *segm*</span><br><span class="line">DONE (t=0.46s).</span><br><span class="line">Accumulating evaluation results...</span><br><span class="line">DONE (t=0.05s).</span><br><span class="line"> Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.367</span><br><span class="line"> Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=1000 ] = 0.416</span><br><span class="line"> Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=1000 ] = 0.415</span><br><span class="line"> Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=1000 ] = -1.000</span><br><span class="line"> Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=1000 ] = 0.365</span><br><span class="line"> Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=1000 ] = 0.369</span><br><span class="line"> Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.373</span><br><span class="line"> Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=300 ] = 0.373</span><br><span class="line"> Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=1000 ] = 0.373</span><br><span class="line"> Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=1000 ] = -1.000</span><br><span class="line"> Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=1000 ] = 0.369</span><br><span class="line"> Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=1000 ] = 0.375</span><br><span class="line">2021-10-27 22:03:28,939 - mmdet - INFO - Exp name: my_mask_rcnn.py</span><br><span class="line">2021-10-27 22:03:28,939 - mmdet - INFO - Epoch(val) [9][464]    bbox_mAP: 0.3800, bbox_mAP_50: 0.4210, bbox_mAP_75: 0.4090, bbox_mAP_s: -1.0000, bbox_mAP_m: 0.3880, bbox_mAP_l: 0.3760, bbox_mAP_copypaste: 0.380 0.421 0.409 -1.000 0.388 0.376, segm_mAP: 0.3670, segm_mAP_50: 0.4160, segm_mAP_75: 0.4150, segm_mAP_s: -1.0000, segm_mAP_m: 0.3650, segm_mAP_l: 0.3690, segm_mAP_copypaste: 0.367 0.416 0.415 -1.000 0.365 0.369</span><br></pre></td></tr></table></figure>



<p>Some results are as shown in the sheet. In this article, we don’t detailedly explain what each statistic means.</p>
<h2 id="5-Evaluate-and-visualize-our-model"><a href="#5-Evaluate-and-visualize-our-model" class="headerlink" title="5. Evaluate and visualize our model"></a>5. <strong>Evaluate and visualize our model</strong></h2><p>We can run the following script to visualize our model.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mmdet.apis <span class="keyword">import</span> init_detector, inference_detector, show_result_pyplot</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    config_file = <span class="string">&#x27;mmdetection/configs/mask_rcnn/my_mask_rcnn.py&#x27;</span></span><br><span class="line">    <span class="comment"># url: https://download.openmmlab.com/mmdetection/v2.0/faster_rcnn/faster_rcnn_r50_fpn_1x_coco/faster_rcnn_r50_fpn_1x_coco_20200130-047c8118.pth</span></span><br><span class="line">    checkpoint_file = <span class="string">&#x27;mmdetection/work_dirs/my_mask_rcnn/latest.pth&#x27;</span></span><br><span class="line">    device = <span class="string">&#x27;cpu&#x27;</span></span><br><span class="line">    <span class="comment"># init a detector</span></span><br><span class="line">    model = init_detector(config_file, checkpoint_file, device=device)</span><br><span class="line">    <span class="comment"># inference the demo image</span></span><br><span class="line">    img = <span class="string">&#x27;../tool_seg_data/neee/rgb/1906.jpeg&#x27;</span></span><br><span class="line">    result = inference_detector(model, img)</span><br><span class="line">    show_result_pyplot(model, img, result, score_thr=<span class="number">0.3</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2021/10/29/mmdection-hammer-segmentation/wps11.jpg"><img src="/2021/10/29/mmdection-hammer-segmentation/wps12.jpg"> </p>
<p><img src="/2021/10/29/mmdection-hammer-segmentation/wps13.jpg"><img src="/2021/10/29/mmdection-hammer-segmentation/wps14.jpg"> </p>
<p>Thank God we finally successfully train the segmentation network.</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>mmdection_hammer_segmentation</p><p><a href="https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/">https://kami-code.com/2021/10/29/mmdection-hammer-segmentation/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Kami-code</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-10-29</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-10-29</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/mmdection/">mmdection</a><a class="link-muted mr-2" rel="tag" href="/tags/segmentation/">segmentation</a><a class="link-muted mr-2" rel="tag" href="/tags/deeplearning/">deeplearning</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/11/04/complier-lab3/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">complier-lab3</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/10/20/moveit-configuration/"><span class="level-item">MoveIt Configuration</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="SOHUCS" sid="2021/10/29/mmdection-hammer-segmentation/"></div><script charset="utf-8" src="https://changyan.sohu.com/upload/changyan.js"></script><script>window.changyan.api.config({appid: 'cyvI88c19',conf: 'prod_634561f1ec380218934dcf2c12b8b70b'});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.jpg" alt="Chen Bao"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Chen Bao</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shanghai, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">26</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">37</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Kami-code" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Kami-code"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-17T03:10:18.000Z">2022-02-17</time></p><p class="title"><a href="/2022/02/17/behavior-clone/">(IJCAI2018)Behavior Clone from Observation</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-14T10:48:00.000Z">2022-02-14</time></p><p class="title"><a href="/2022/02/14/soil/">(IROS2021)SOIL</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-29T03:41:38.000Z">2022-01-29</time></p><p class="title"><a href="/2022/01/29/unigrasp/">(ICRA2020)Unigrasp</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-26T10:59:39.000Z">2022-01-26</time></p><p class="title"><a href="/2022/01/26/GIGA/">(RSS2021)GIGA</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-18T06:33:35.000Z">2022-01-18</time></p><p class="title"><a href="/2022/01/18/GraspNet-1Billion/">(CVPR2020)GraspNet-1Billion</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/BCO/"><span class="tag">BCO</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CHOMP/"><span class="tag">CHOMP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CVPR/"><span class="tag">CVPR</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Camera/"><span class="tag">Camera</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GraspNet/"><span class="tag">GraspNet</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ICCV/"><span class="tag">ICCV</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ICRA/"><span class="tag">ICRA</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IJCAI/"><span class="tag">IJCAI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IROS/"><span class="tag">IROS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Neo4j/"><span class="tag">Neo4j</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenCV/"><span class="tag">OpenCV</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenGL/"><span class="tag">OpenGL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PointNet/"><span class="tag">PointNet</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PointNet/"><span class="tag">PointNet++</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pybind11/"><span class="tag">Pybind11</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pybullet/"><span class="tag">Pybullet</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROS/"><span class="tag">ROS</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RSS/"><span class="tag">RSS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SE3353/"><span class="tag">SE3353</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SOIL/"><span class="tag">SOIL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ScrewNet/"><span class="tag">ScrewNet</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Search/"><span class="tag">Search</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VoteNet/"><span class="tag">VoteNet</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WebService/"><span class="tag">WebService</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/behavior-tree/"><span class="tag">behavior tree</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/compliers/"><span class="tag">compliers</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/deeplearning/"><span class="tag">deeplearning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ikfast/"><span class="tag">ikfast</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lab/"><span class="tag">lab</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mmdection/"><span class="tag">mmdection</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/moveit/"><span class="tag">moveit</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/planning/"><span class="tag">planning</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pybullet/"><span class="tag">pybullet</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/segmentation/"><span class="tag">segmentation</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Ryan &#039;s website" height="28"></a><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span><span class="post-meta-divider">|</span><span id="busuanzi_container_site_uv" style="display:none">本站访客数<span id="busuanzi_value_site_uv"></span>人</span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><p class="is-size-7"><span>&copy; 2022 Kami-code</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>